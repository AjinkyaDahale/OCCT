puts "========================================="
puts "OCC32214: 2d Offset produces wrong result"
puts "========================================="
puts ""

restore [locate_data_file bug32214.brep] a
wire ww a
donly ww

openoffset result ww 14 -0.1 -approx

front
fit

checkview -screenshot -2d -path ${imagedir}/${test_image}.png

for {set i 1} {$i<=14} {incr i} {
	checkshape result_${i}
	set tolres [checkmaxtol result_${i}]
	if { ${tolres} > 1.001e-7} {
		puts "Error: bad tolerance of result"
	}
}

checknbshapes result_1 -t -vertex 50 -edge 49 -wire 1
checkprops result_1 -l 1.66475
checknbshapes result_2 -t -vertex 46 -edge 45 -wire 1
checkprops result_2 -l 1.57655
checknbshapes result_3 -t -vertex 40 -edge 39 -wire 1
checkprops result_3 -l 1.48755
checknbshapes result_4 -t -vertex 37 -edge 36 -wire 1
checkprops result_4 -l 1.39682
checknbshapes result_5 -t -vertex 31 -edge 30 -wire 1
checkprops result_5 -l 1.30715
checknbshapes result_6 -t -vertex 28 -edge 27 -wire 1
checkprops result_6 -l 1.27033
checknbshapes result_7 -t -vertex 24 -edge 23 -wire 1
checkprops result_7 -l 1.1996
checknbshapes result_8 -t -vertex 22 -edge 21 -wire 1
checkprops result_8 -l 1.1737
checknbshapes result_9 -t -vertex 18 -edge 17 -wire 1
checkprops result_9 -l 1.17713
checknbshapes result_10 -t -vertex 17 -edge 16 -wire 1
checkprops result_10 -l 1.22711
checknbshapes result_11 -t -vertex 14 -edge 13 -wire 1
checkprops result_11 -l 1.2663
checknbshapes result_12 -t -vertex 14 -edge 13 -wire 1
checkprops result_12 -l 1.33108
checknbshapes result_13 -t -vertex 14 -edge 13 -wire 1
checkprops result_13 -l 1.39586
checknbshapes result_14 -t -vertex 14 -edge 13 -wire 1
checkprops result_14 -l 1.46064
